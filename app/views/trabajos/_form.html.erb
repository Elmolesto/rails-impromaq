
<%= simple_form_for(@trabajo)  do |f| %>
<%= f.error_notification %>
<%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>




<div class="invoice-box">
  <table cellpadding="0" cellspacing="0">
    <tr class="top">
      <td colspan="4">
        <table>
          <tr>
            <td class="title">
              <img src="/logo.png" style="width:100%; max-width:80px;">
            </td>

            <td>
              Cotización<br> Created: January 1, 2020<br> Due: February 1, 2020
            </td>
          </tr>
        </table>
      </td>
    </tr>

    <tr class="information">
      <td colspan="4">
        <table>
          <tr>
            <td>
              Servicios Industriales Impromaq Ltda<br> Viana 345 depto 14<br> Viña del Mar
            </td>

            <td>
              Impromaq Ltda.<br> Fernando Gonzalez<br>fernando.gonzalez@msindustria.cl
            </td>
          </tr>
        </table>
      </td>
    </tr>
    <tr class="heading">
      <td colspan="3">
        Información
      </td>

      <td>

      </td>
    </tr>
    <tr class="item">
      <td><%= f.input :planta %></td>
        <td><%= f.input :ito %></td>
        <td><%= f.input :centro_costo %></td>
        <td><%= f.input :supervisor %></td>
    </tr>
    <tr class="item">
        <td><%= f.input :descripcion %></td>
        <td><%= f.input :avance %></td>
        <td><%= f.input :op %></td>
        <td><%= f.input :factura %></td>
    </tr>


    <tr class="heading">
      <td>
        Item
      </td>

      <td>
        Unit Cost
      </td>

      <td>
        Quantity
      </td>

      <td>
        Price
      </td>
    </tr>

    <tr class="item">
      <td><%= f.input :i1, label: false %></td>
      <td><%= f.input :v1, label: false %></td>
      <td><%= f.input :q1, label: false %></td>
      <td>$0</td>
    </tr>
    <tr class="item">
      <td><%= f.input :i2, label: false %></td>
      <td><%= f.input :v2, label: false %></td>
      <td><%= f.input :q2, label: false %></td>
      <td>$0</td>
    </tr>
    <tr class="item">
      <td><%= f.input :i3, label: false %></td>
      <td><%= f.input :v3, label: false %></td>
      <td><%= f.input :q3, label: false %></td>
      <td>$0</td>
    </tr>
    <tr class="item">
      <td><%= f.input :i4, label: false %></td>
      <td><%= f.input :v4, label: false %></td>
      <td><%= f.input :q4, label: false %></td>
      <td>$0</td>
    </tr>
    <tr class="item">
      <td><%= f.input :i5, label: false %></td>
      <td><%= f.input :v5, label: false %></td>
      <td><%= f.input :q5, label: false %></td>
      <td>$0</td>
    </tr>
    <tr class="item">
      <td><%= f.input :i6, label: false %></td>
      <td><%= f.input :v6, label: false %></td>
      <td><%= f.input :q6, label: false %></td>
      <td>$0</td>
    </tr>
    <tr class="item">
      <td><%= f.input :i7, label: false %></td>
      <td><%= f.input :v7, label: false %></td>
      <td><%= f.input :q7, label: false %></td>
      <td>$0</td>
    </tr>
    <tr class="item">
      <td><%= f.input :i8, label: false %></td>
      <td><%= f.input :v8, label: false %></td>
      <td><%= f.input :q8, label: false %></td>
      <td>$0</td>
    </tr>
    <tr class="item">
      <td><%= f.input :i9, label: false %></td>
      <td><%= f.input :v9, label: false %></td>
      <td><%= f.input :q9, label: false %></td>
      <td>$0</td>
    </tr>
    <tr class="item">
      <td><%= f.input :i10, label: false %></td>
      <td><%= f.input :v10, label: false %></td>
      <td><%= f.input :q10, label: false %></td>
      <td>$0</td>
    </tr>
    <tr class="item">
      <td><%= f.input :i11, label: false %></td>
      <td><%= f.input :v11, label: false %></td>
      <td><%= f.input :q11, label: false %></td>
      <td>$0</td>
    </tr>
    <tr class="item">
      <td><%= f.input :i12, label: false %></td>
      <td><%= f.input :v12, label: false %></td>
      <td><%= f.input :q12, label: false %></td>

      <td>$0</td>
    </tr>



    <tr class="total">
      <td colspan="3"></td>

      <td>
        Total: $385.00
        <%= f.input :total, label: false %>

      </td>
    </tr>
    <tr class="heading">
      <td colspan="3">
        Payment Method
      </td>

      <td>

      </td>
    </tr>
    <tr class="details">

      <td colspan="3">
        <%= f.input :otros %>
        <%= f.input :fecha_termino %>
        <%= f.input :observaciones %>
      </td>


    </tr>

  </table>
</div>


<div class="form-inputs">
  <div class="row">

  </div>

  <div class="row">

  </div>







</div>

<div class="form-actions">
  <%= f.button :submit %>
</div>
<% end %>




<style>
  .invoice-box {
  max-width: 900px;
  margin: auto;
  padding: 30px;
  border: 1px solid #eee;
  box-shadow: 0 0 10px rgba(0, 0, 0, .15);
  font-size: 14px;

  color: #555;
}

.invoice-box table {
  width: 100%;
  line-height: inherit;
  text-align: left;
}

.invoice-box table td {

  vertical-align: top;
}

.invoice-box table tr td:nth-child(n+2) {
  text-align: right;
}

.invoice-box table tr.top table td {
  padding-bottom: 20px;
}

/* .invoice-box table tr.top table td.title {
  font-size: 45px;
  line-height: 45px;
  color: #333;
} */

.invoice-box table tr.information table td {
  padding-bottom: 40px;
}

.invoice-box table tr.heading td {
  background: #eee;
  border-bottom: 1px solid #ddd;
  font-weight: bold;
}

/* .invoice-box table tr.details td {
  padding-bottom: 20px;
} */

/* .invoice-box table tr.item td{
  border-bottom: 1px solid #eee;
} */

/* .invoice-box table tr.item.last td {
  border-bottom: none;
} */

/* .invoice-box table tr.item input {
  padding-left: 5px;
} */

/* .invoice-box table tr.item td:first-child input {
  margin-left: -5px;
  width: 100%;
} */

/* .invoice-box table tr.total td:nth-child(2) {
  border-top: 2px solid #eee;
  font-weight: bold;
} */

/* .invoice-box input[type=number] {
  width: 60px;
} */

@media only screen and (max-width: 600px) {
  .invoice-box table tr.top table td {
      width: 100%;
      display: block;
      text-align: center;
  }

  .invoice-box table tr.information table td {
      width: 100%;
      display: block;
      text-align: center;
  }
}

/** RTL **/
/* .rtl {
  direction: rtl;
  font-family: Tahoma, 'Helvetica Neue', 'Helvetica', Helvetica, Arial, sans-serif;
} */

/* .rtl table {
  text-align: right;
} */

/* .rtl table tr td:nth-child(2) {
  text-align: left;
} */

</style>

<script>
  $('table').on('mouseup keyup', 'input[type=number]', () => calculateTotals());



  function calculateTotals() {
    const subtotals = $('.item').map((idx, val) => calculateSubtotal(val)).get();
    const total = subtotals.reduce((a, v) => a + Number(v), 0);
    $('.total td:eq(1)').text(formatAsCurrency(total));
  }

  function calculateSubtotal(row) {
    const $row = $(row);
    const inputs = $row.find('input');
    const subtotal = inputs[1].value * inputs[2].value;

    $row.find('td:last').text(formatAsCurrency(subtotal));

    return subtotal;
  }

  function formatAsCurrency(amount) {
    return `$${Number(amount).toFixed(2)}`;
  }

</script>
